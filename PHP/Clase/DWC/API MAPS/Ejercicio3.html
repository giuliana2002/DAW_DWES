<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<style type="text/css">
		/* TENEMOS QUE DARLE UN TAMAÑO AL DIV QUE CONTIENE EL MAPA. SI NO, NO SE VERÁ  */
		#divmapa {
			width: 700px;
			height: 700px;
			border: 1px solid blue;
		}
	</style>

	<title>Ejercicio 3</title>

	<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyA6rLid89W1HGF2lCnQbfx62tr-57ugzdU">
	</script>

	<script type="text/javascript">
		var infowindows = [];

		function CargarMapa() {

			var opciones = {
				center: new google.maps.LatLng(37.386719, -5.981365),
				zoom: 17
			};


			var mapa = new google.maps.Map(document.getElementById("divmapa"), opciones);


			google.maps.event.addListener(mapa, 'click', function (e) {
				ponVentana(e.latLng, mapa);
			});


			google.maps.event.addListener(mapa, 'zoom_changed', function () {
				actualizarInfoWindows(mapa);
			});
		}

		function ponVentana(pos, mapa) {

			var zoom = mapa.getZoom();
			var infowindow = new google.maps.InfoWindow({
				position: pos,
				map: mapa,
				content: "Latitud: " + pos.lat() + " <br />Longitud: " + pos.lng() + "<br />Zoom: " + zoom
			});


			infowindows.push(infowindow);
		}

		function actualizarInfoWindows(mapa) {

			var zoom = mapa.getZoom();
			for (let infowindow of infowindows) {
				var pos = infowindow.getPosition();
				infowindow.setContent(
					"Latitud: " + pos.lat() + " <br />Longitud: " + pos.lng() + "<br />Zoom: " + zoom
				);
			}
		}


		window.onload = CargarMapa;
	</script>
</head>

<body>
	<h3>Ejercicio 3</h3>

	<p>
	<div id="divmapa">
		Aquí pondremos el mapa
	</div>
	</p>
</body>

</html>