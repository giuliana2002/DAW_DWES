<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Calculadora Giuliana Castillo 2ºdaw</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: url(data:image/jpeg;base64,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);
            background-size: cover;
        }

        h1 {
            margin-top: px;
            color: #333;
            font-size: 20px;
        }

        h2 {
            margin-top: 30px;
            margin-left: 20px;
            color: #333;
        }

        form {
            margin-left: 20px;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input {
            margin-top: 5px;
            padding: 5px;
            width: 200px;
        }

        input[type="submit"] {
            margin-top: 20px;
            background-color: mediumpurple;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }

        input[type="submit"]:hover {
            background-color: mediumseagreen;
        }

        select {
            margin-top: 5px;
            padding: 5px;
            width: 200px;
        }
    </style>
</head>

</html>

<body>
    <h1>Calculadora</h1>
    <p>Giuliana Castillo</p>
    <form method="post">
        <label for="producto">Seleccione el producto:</label>
        <select name="producto" id="producto">
            <option value="Camiseta">Camiseta - 7.50€</option>
            <option value="Pantalon">Pantalon - 5.00€</option>
            <option value="Gorra">Gorra - 10.00€</option>
        </select>
        <label for="cantidad">Cantidad:</label>
        <input type="number" name="cantidad" id="cantidad" min="1" max="100" required>
        <input type="submit" value="Calcular">
    </form>

    <?php
    if ($_SERVER['REQUEST_METHOD'] == 'POST') {
        define('DESCUENTO_PEQUENO', 0.10);
        define('DESCUENTO_ADICIONAL', 0.05);
        define('LIMITE_DESCUENTO', 50);
        define('LIMITE_COMPRA_GRANDE', 100);
        define('LIMITE_CANTIDAD_ADICIONAL', 40);
        define('IVA', 0.15);

        $productos = [
            'Camiseta' => 7.50,
            'Pantalon' => 5.00,
            'Gorra' => 10.00
        ];

        $unidades = [
            'Camiseta' => 10,
            'Pantalon' => 100,
            'Gorra' => 100
        ];

        $productoSeleccionado = $_POST['producto'];
        $cantidad = $_POST['cantidad'];
        $precio = $productos[$productoSeleccionado];
        $unidad = $unidades[$productoSeleccionado];

        // Comprueba que la cantidad no sea mayor que la unidades de producto que hay.
        if ($cantidad > $unidad) {
            echo "<h1>No puedes comprar más de $unidad unidades de $productoSeleccionado.</h1>";
        } else {
            // Calcula el subtotal sin descuento.
            $subtotal = $cantidad * $precio;
            $totalSinDescuento = $subtotal;

            echo "<h2>Detalles de la compra:</h2>";
            echo "<p>Producto seleccionado: <strong>$productoSeleccionado</strong></p>";
            echo "<p>Cantidad: <strong>$cantidad</strong></p>";
            echo "<p>Precio unitario: <strong>" . number_format($precio, 2) . "€</strong></p>";
            echo "<p>Subtotal: <strong>" . number_format($subtotal, 2) . "€</strong></p>";

            // Aplica descuento si el total sin descuento es mayor que el límite de descuento.

            if ($totalSinDescuento > LIMITE_DESCUENTO) {
                $descuento = $totalSinDescuento * DESCUENTO_PEQUENO;
                $totalConDescuento = $totalSinDescuento - $descuento;
                echo nl2br("Descuento aplicado: €" . number_format($descuento, 2) . "\n");
            } else {

                $totalConDescuento = $totalSinDescuento;
            }
            // Aplica descuento adicional si la cantidad es mayor que el límite de cantidad adicional.
            if ($cantidad > LIMITE_CANTIDAD_ADICIONAL) {
                $descuentoAdicional = $totalConDescuento * DESCUENTO_ADICIONAL;
                $totalConDescuento -= $descuentoAdicional;
                echo nl2br("Descuento adicional aplicado: €" . number_format($descuentoAdicional, 2));
            }
            // Calcula el IVA.

            $iva = $totalConDescuento * IVA;
            $totalConIva = $totalConDescuento + $iva;

            // Muestra los resultados utilizando la función number_format para formatear los números 
            echo nl2br("<h1>Total sin descuento: " . number_format($totalSinDescuento, 2) . "€</h1>");
            echo nl2br("<h1>Total con descuento: " . number_format($totalConDescuento, 2) . "€</h1>");
            echo nl2br("<h1>Total con IVA: " . number_format($totalConIva, 2) . "€</h1>");
            // Muestra un mensaje si la compra es grande.
            if ($totalSinDescuento > LIMITE_COMPRA_GRANDE) {
                echo "<p>Esta es una compra grande como un camión.</p>";
            }

            // Calcula el promedio de precio por unidad.

            $promedioPrecioPorUnidad = $totalConDescuento / $cantidad;
            echo "<h1>Promedio de precio por unidad: " . number_format($promedioPrecioPorUnidad, 2) . "€</h1>";

            // Muestra si la cantidad de productos es par o impar.

            if ($cantidad % 2 == 0) {
                echo "<h1>La cantidad de productos es par.</h1>";
            } else {
                echo "<h1>La cantidad de productos es impar.</h1>";
            }

            if ($totalConIva > 200 || $cantidad > 50) {
                echo "<h2>¡Felicidades! Recibes un producto gratis.</h2>";
            }
        }
    }
    ?>
</body>

</html>